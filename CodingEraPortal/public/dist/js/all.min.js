"use strict";var caseController=function(){var t={};return t.initTag=function(){var t=$(".case-content"),e=$(".tags ul");t.length>0&&$.ajax({url:window.apiURL+"/tag",type:"get",dataType:"json",success:function(t){console.log(t);for(var a="",n=0;n<t.data.content.length;n++){var i=t.data.content[n];a='<li><a href="/case?tagId='+i.id+'">'+i.name+"</a></li>"+a}e.append(a)},complete:function(){$(".tag-loading").hide()}})},t}();caseController.initTag();var dynamicController=function(){var t={};t.initPageCtrl=function(){var e=$(".point-end.hand"),a=$("#dynamic-size").val(),n=($("#dynamic-card-template").html(),$(".point-end-container"));e.click(function(){var i=e.data("page");e.addClass("auto-rotate"),$.ajax({url:window.apiURL+"/dynamic/list?size="+a+"&page="+(Number(i)+1),type:"get",dataType:"json",success:function(a){for(var i=0;i<a.data.content.length;i++){var o=a.data.content[i],r=window.template("dynamic-card-template",{dynamic:o});n.before(r),e.data("page",a.data.number)}t.initFormat(),a.data.last&&(e.after('<div class="point-end"><span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span></div>'),e.remove())},complete:function(){e.removeClass("auto-rotate")}})})};var e="刚刚",a="秒前",n="分钟前",i="今天 HH:mm",o="昨天 HH:mm",r="DD日 HH:mm",m="MM月DD日 HH:mm",c="YYYY月MM日DD HH:mm";return t.friendlyTime=function(d,l,s){var u=window.moment(),f=u.year(),v=u.month(),p=u.date(),g=u.hour(),y=u.minute(),h=u.second(),$=window.moment(l),w=$.year(),H=$.month(),C=$.date(),T=$.hour(),b=$.minute(),D=$.second(),j="";if(f===w)if(v===H)if(p===C)if(g===T)if(y===b){var x=h-D;j=10>x?e:x+a,s=setTimeout(function(){t.friendlyTime(d,l,s)},1e4)}else{var M=y-b;j=M+n,s=setTimeout(function(){t.friendlyTime(d,l,s)},6e4)}else j=$.format(i);else{var Y=p-C;j=1===Y?$.format(o):$.format(r)}else j=$.format(m);else j=$.format(c);d.html(j)},t.initFormat=function(){var e=$('div[name*="dynamic-time-"][data-timer="0"]');e.each(function(){var e,a=$(this),n=a.data("time");t.friendlyTime(a,n,e),a.removeAttr("data-timer")})},t}();dynamicController.initPageCtrl(),dynamicController.initFormat();var homeController=function(){var t={};return t.initSectionHeader=function(){$(".gearbox"),$(".gearbox").parent("div");$(window).resize(function(){})},t}();homeController.initSectionHeader();